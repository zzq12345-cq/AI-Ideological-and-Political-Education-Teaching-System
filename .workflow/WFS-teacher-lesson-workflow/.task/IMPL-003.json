{
  "id": "IMPL-003",
  "title": "AIæ™ºèƒ½å¤‡è¯¾é¡µé¢æ”¹é€ ï¼ˆæ·»åŠ æ ‡ç­¾é¡µï¼‰",
  "status": "pending",

  "meta": {
    "type": "integration",
    "agent": "@code-developer",
    "priority": "P0",
    "phase": "Phase 3: é›†æˆ",
    "estimated_days": 0.5,
    "version": "2.0",
    "activeForm": "æ”¹é€ AIæ™ºèƒ½å¤‡è¯¾é¡µé¢"
  },

  "context": {
    "requirements": ["åœ¨AIæ™ºèƒ½å¤‡è¯¾é¡µé¢æ·»åŠ æ•™æ¡ˆç¼–è¾‘åŠŸèƒ½"],
    "focus_paths": [
      "src/dashboard/modernmainwindow.cpp",
      "src/dashboard/modernmainwindow.h",
      "src/ui/LessonPlanEditor.h"
    ],
    "acceptance": [
      "AIæ™ºèƒ½å¤‡è¯¾é¡µé¢æ˜¾ç¤ºä¸¤ä¸ªæ ‡ç­¾é¡µï¼šAIå¯¹è¯ã€æ•™æ¡ˆç¼–è¾‘",
      "ç‚¹å‡»AIå¯¹è¯æ ‡ç­¾æ˜¾ç¤ºç°æœ‰ChatWidget",
      "ç‚¹å‡»æ•™æ¡ˆç¼–è¾‘æ ‡ç­¾æ˜¾ç¤ºLessonPlanEditor",
      "é»˜è®¤æ˜¾ç¤ºAIå¯¹è¯æ ‡ç­¾",
      "æ ‡ç­¾åˆ‡æ¢æµç•…æ— é—ªçƒ"
    ],
    "depends_on": ["IMPL-002"],
    "artifacts": [],
    "design_decision": "åœ¨ç°æœ‰AIæ™ºèƒ½å¤‡è¯¾é¡µé¢æ·»åŠ æ ‡ç­¾é¡µï¼Œä¿æŒå…¥å£ä¸å˜"
  },

  "flow_control": {
    "pre_analysis": [
      {
        "step": "read_main_window",
        "action": "åˆ†æModernMainWindowä¸­onAIPreparationClickedçš„å®ç°",
        "target": "src/dashboard/modernmainwindow.cpp",
        "on_error": "fail"
      },
      {
        "step": "read_chat_container",
        "action": "äº†è§£m_chatContainerçš„ç»“æ„",
        "target": "src/dashboard/modernmainwindow.cpp",
        "on_error": "fail"
      }
    ],
    "implementation_approach": [
      {
        "step": 1,
        "title": "åˆ›å»ºAIæ™ºèƒ½å¤‡è¯¾å®¹å™¨",
        "description": "åˆ›å»ºåŒ…å«æ ‡ç­¾é¡µçš„æ–°å®¹å™¨æ›¿æ¢åŸm_chatContainer",
        "details": [
          "åˆ›å»ºQWidgetå®¹å™¨",
          "æ·»åŠ QTabWidgetæˆ–è‡ªå®šä¹‰æ ‡ç­¾æ ",
          "æ ‡ç­¾1ï¼šAIå¯¹è¯ï¼ˆç°æœ‰ChatWidgetï¼‰",
          "æ ‡ç­¾2ï¼šæ•™æ¡ˆç¼–è¾‘ï¼ˆLessonPlanEditorï¼‰"
        ],
        "depends_on": []
      },
      {
        "step": 2,
        "title": "ä¿®æ”¹onAIPreparationClicked",
        "description": "åˆ‡æ¢åˆ°æ–°çš„AIæ™ºèƒ½å¤‡è¯¾å®¹å™¨",
        "details": [
          "å°†m_mainStackåˆ‡æ¢åˆ°æ–°å®¹å™¨",
          "ä¿æŒä¾§è¾¹æ åˆ‡æ¢é€»è¾‘ä¸å˜"
        ],
        "depends_on": [1]
      },
      {
        "step": 3,
        "title": "æ ·å¼è°ƒæ•´",
        "description": "ç¡®ä¿æ ‡ç­¾é¡µæ ·å¼ä¸æ•´ä½“é£æ ¼ä¸€è‡´",
        "details": [
          "ä½¿ç”¨æ€æ”¿çº¢ä¸»é¢˜è‰²",
          "æ ‡ç­¾é¡µåˆ‡æ¢åŠ¨ç”»"
        ],
        "depends_on": [1, 2]
      }
    ],
    "target_files": [
      "src/dashboard/modernmainwindow.h",
      "src/dashboard/modernmainwindow.cpp"
    ]
  },

  "deliverables": [
    "AIæ™ºèƒ½å¤‡è¯¾é¡µé¢æ”¹é€ ï¼ˆæ·»åŠ æ ‡ç­¾é¡µåˆ‡æ¢ï¼‰",
    "æ ‡ç­¾1ï¼šAIå¯¹è¯ï¼ˆä¿æŒç°æœ‰åŠŸèƒ½ï¼‰",
    "æ ‡ç­¾2ï¼šæ•™æ¡ˆç¼–è¾‘ï¼ˆé›†æˆLessonPlanEditorï¼‰"
  ],

  "ui_design": {
    "layout": "æ ‡ç­¾é¡µåˆ‡æ¢",
    "mockup": [
      "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”",
      "â”‚  AIæ™ºèƒ½å¤‡è¯¾                                â”‚",
      "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
      "â”‚  [ğŸ’¬ AIå¯¹è¯]   [ğŸ“ æ•™æ¡ˆç¼–è¾‘]               â”‚",
      "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
      "â”‚                                            â”‚",
      "â”‚   å½“å‰æ ‡ç­¾é¡µå†…å®¹åŒºåŸŸ                        â”‚",
      "â”‚                                            â”‚",
      "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
    ]
  },

  "replan_history": [
    {
      "version": "2.0",
      "timestamp": "2026-02-02T21:15:00+08:00",
      "reason": "ä»»åŠ¡é‡æ„ï¼šç®€åŒ–ä¸º4ä¸ªä»»åŠ¡ï¼Œèšç„¦æ•™æ¡ˆç¼–è¾‘å™¨",
      "changes": [
        "æ–°å¢ä»»åŠ¡ï¼šæ”¹é€ AIæ™ºèƒ½å¤‡è¯¾é¡µé¢æ·»åŠ æ ‡ç­¾é¡µ"
      ],
      "input_source": "user_decision"
    }
  ]
}
